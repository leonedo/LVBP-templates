<!DOCTYPE html>
<html lang="en">

<head>

    <!--  template made by heine froholdt heine.froholdt@gmail.com  -->
    <meta charset="UTF-8" />
    <title>Lower Third Bodymovin</title>

    <style>

        #bm {
            position: fixed;                 
                
        }

        #loop {
            position: fixed;  
          
        }

        body {
            overflow: hidden;
            margin: 0;

        }
    </style>
</head>

<body>
    


    <div id="bm"></div>
    <div id="loop"></div>



    <!-- Scripts -->
    <script>
    // Declare a global variable to store the modified JSON
    let json_file = "bat3_data.json"
    let pestana = "pestanas/xl/"
    let equipo = "aguilas"
    let script_name = "bat3.js"
    </script>

    
    <script src="../webcg-framework.umd.js"></script>
    <script src="../lottie.js"></script>
    <script>
        let myAnimationData = null;

function loadJSON(json_file, script_name, pestana, equipo) {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', json_file, true);

    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            // Parse the JSON data from the response
            const animationData = JSON.parse(xhr.responseText);
            // Modify the asset paths in the JSON data
            animationData.assets.forEach(asset => {
                if (asset.pestana) {
                    // Replace "pest" with "my_pest" while keeping the rest of the string
                    asset.u = pestana;
                }
                if (asset.barra) {
                    asset.u = `${equipo}/`;
                }
            });
            // Store the modified JSON data in the global variable
            myAnimationData = animationData;
            // Log the modified JSON to verify
            console.log('Modified JSON:', myAnimationData);
            // Load the bat_3_copy.js script now that the data is ready
            loadScript(script_name);
        } else if (xhr.readyState === 4) {
            // Handle any errors that occur during the request
            console.error('Error loading JSON:', xhr.status, xhr.statusText);
        }
    };

    // Send the request
    xhr.send();
}
// Function to load the script dynamically
function loadScript(script_name) {
    const script = document.createElement('script');
    script.src = script_name;
    document.head.appendChild(script);
}

loadJSON(json_file, script_name, pestana, equipo);
    </script>


    
  

</body>

</html>